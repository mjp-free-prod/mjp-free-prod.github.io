import v from"./inputtext.esm.10aba614.js";import{s as g}from"./button.esm.12771107.js";import{f as x,g as M,r as n,i as w,o as a,k as i,w as I,a as c,c as y,z as b,q as l,F as h,b as u,s as k,M as B}from"./entry.a6487435.js";import{A as C}from"./AppCard.92ec6dc2.js";import V from"./order-discussion-message.4e6dfad5.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.esm.4a91adc5.js";import"./datetime.f31b9a37.js";const A={class:"chat-container"},D={class:"user-message"},N=x({__name:"order-discussion",props:{orderId:{},mode:{}},setup(m){const e=m,o=M(B),t=n([]),s=n("");w(async()=>{t.value=await o.getOrderMessages(e.orderId)});async function p(){s.value&&(e.mode==="customer"?await o.addCustomerMessage(e.orderId,s.value):await o.addModerMessage(e.orderId,s.value),s.value="",t.value=await o.getOrderMessages(e.orderId))}return(S,d)=>{const _=v,f=g;return a(),i(C,{grow:"1",style:{"flex-grow":"1",width:"100%"},id:"order-discussion-"+e.orderId,basis:"700px",title:"Обсуждение заказа #"+e.orderId},{default:I(()=>[c("div",A,[(a(!0),y(h,null,b(l(t),r=>(a(),i(V,{time:r.createdAt,source:r.source,sender:r.displayName,text:r.displayText},null,8,["time","source","sender","text"]))),256))]),c("div",D,[u(_,{modelValue:l(s),"onUpdate:modelValue":d[0]||(d[0]=r=>k(s)?s.value=r:null),class:"messagebox",placeholder:"Введите сообщение"},null,8,["modelValue"]),u(f,{label:"Отправить",onClick:p})])]),_:1},8,["id","title"])}}});const $=O(N,[["__scopeId","data-v-ef608e0f"]]);export{$ as default};
