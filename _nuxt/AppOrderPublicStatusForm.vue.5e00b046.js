import{s as F}from"./button.esm.6176fc8e.js";import{f as g,r as s,g as k,i as N,j as p,o as m,k as l,w as c,q as r,s as I,b as h,n as f,L as D}from"./entry.9b45c852.js";import{A as C}from"./AppCard.73bfc289.js";function u(o){if(Number.isFinite(o))return o}const B=g({__name:"AppOrderPublicStatusForm",props:{id:{},readonly:{type:Boolean},data:{}},emits:["update"],setup(o,{emit:y}){const e=o,n=s(null),t=s(null),P=k(D);N(async()=>{const a=await P.getEnabledOrderStatusTypes();t.value={orderStatusTypeId:e.data.orderStatusTypeId,shippingPriceToPay:u(e.data.shippingPriceToPay),productsPriceToPay:u(e.data.productsPriceToPay),totalPriceToPay:u(e.data.totalPriceToPay)},n.value=[{$formkit:"primeDropdown",name:"orderStatusTypeId",label:"Статус",validation:"required",_disabled:e.readonly,options:a},{$formkit:"primeInputNumber",name:"shippingPriceToPay",label:"К оплате за доставку",suffix:" PLN",minFractionDigits:2,maxFractionDigits:2,validation:"min:0|max:1000000000",_disabled:e.readonly},{$formkit:"primeInputNumber",name:"productsPriceToPay",label:"К оплате за товары",suffix:" PLN",minFractionDigits:2,maxFractionDigits:2,validation:"min:0.01|max:1000000000",_disabled:!0},{$formkit:"primeInputNumber",name:"totalPriceToPay",label:"Итого к оплате",suffix:" PLN",minFractionDigits:2,maxFractionDigits:2,validation:"min:0.01|max:1000000000",_disabled:!0}]});const d=s(null);function b(){var a;(a=d.value)==null||a.node.submit()}function _(){if(!t.value)return;const{orderStatusTypeId:a,shippingPriceToPay:i}=t.value;y("update",{orderStatusTypeId:a,shippingPriceToPay:i})}return(a,i)=>{const v=p("FormKitSchema"),T=F,S=p("FormKit");return m(),l(C,{basis:"500px",title:"Статус заказа #"+e.id},{default:c(()=>[r(n)&&r(t)?(m(),l(S,{key:0,modelValue:r(t),"onUpdate:modelValue":i[1]||(i[1]=x=>I(t)?t.value=x:null),ref_key:"form",ref:d,type:"form",actions:!1,onSubmit:_},{default:c(()=>[h(v,{schema:r(n)},null,8,["schema"]),e.readonly?f("",!0):(m(),l(T,{key:0,label:"Обновить",onClick:i[0]||(i[0]=()=>b())}))]),_:1},8,["modelValue"])):f("",!0)]),_:1},8,["title"])}}});export{B as _};
